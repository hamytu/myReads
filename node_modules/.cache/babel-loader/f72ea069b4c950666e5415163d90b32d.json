{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\React\\\\project\\\\myreads\\\\starter\\\\src\\\\Search.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport BookItem from \"./BookItem\";\nimport * as BooksApi from \"./BooksAPI\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const SearchBook = () => {\n  _s();\n  const [keyWord, setKeyWord] = useState(\"\");\n  const [bookResultList, setBookResultList] = useState([]);\n  const limit = 50;\n  const handleChangeKeyWord = event => {\n    setKeyWord(event.target.value);\n  };\n\n  // Memoized search function\n  const search = useCallback(() => {\n    if (keyWord.trim() === \"\") {\n      setBookResultList([]);\n      return;\n    }\n\n    // Perform search and fetch all books in parallel\n    Promise.all([BooksApi.search(keyWord, limit), BooksApi.getAll()]).then(([listSearch, listAll]) => {\n      if (listSearch && listSearch.length > 0) {\n        const arrTemp = new Map(listAll.map(book => [book.id, book.shelf]));\n        listSearch.forEach(book => {\n          var _arrTemp$get;\n          book.shelf = (_arrTemp$get = arrTemp.get(book.id)) !== null && _arrTemp$get !== void 0 ? _arrTemp$get : \"none\";\n        });\n        setBookResultList(listSearch);\n      } else {\n        setBookResultList([]);\n      }\n    }).catch(error => {\n      console.error(\"Error fetching books:\", error);\n      setBookResultList([]);\n    });\n  }, [keyWord, limit]);\n\n  // Debounced search execution\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(() => {\n      search();\n    }, 1000);\n    return () => clearTimeout(delayDebounceFn);\n  }, [search]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-books\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-bar\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"close-search\",\n          children: \"Close\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"search-books-input-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Search by title, author, or ISBN\",\n            onChange: handleChangeKeyWord\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"search-books-results\",\n        children: /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"books-grid\",\n          children: bookResultList.map(book => /*#__PURE__*/_jsxDEV(BookItem, {\n            book: book,\n            updateList: search\n          }, book.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n};\n_s(SearchBook, \"QXLBpXTZ45qANlB7Vaj3w+TkJ+w=\");\n_c = SearchBook;\nexport default SearchBook;\nvar _c;\n$RefreshReg$(_c, \"SearchBook\");","map":{"version":3,"names":["useEffect","useState","useCallback","Link","BookItem","BooksApi","jsxDEV","_jsxDEV","SearchBook","_s","keyWord","setKeyWord","bookResultList","setBookResultList","limit","handleChangeKeyWord","event","target","value","search","trim","Promise","all","getAll","then","listSearch","listAll","length","arrTemp","Map","map","book","id","shelf","forEach","_arrTemp$get","get","catch","error","console","delayDebounceFn","setTimeout","clearTimeout","className","children","to","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","updateList","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Desktop/React/project/myreads/starter/src/Search.js"],"sourcesContent":["import { useEffect, useState, useCallback } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport BookItem from \"./BookItem\";\nimport * as BooksApi from \"./BooksAPI\";\n\nexport const SearchBook = () => {\n  const [keyWord, setKeyWord] = useState(\"\");\n  const [bookResultList, setBookResultList] = useState([]);\n  const limit = 50;\n\n  const handleChangeKeyWord = (event) => {\n    setKeyWord(event.target.value);\n  };\n\n  // Memoized search function\n  const search = useCallback(() => {\n    if (keyWord.trim() === \"\") {\n      setBookResultList([]);\n      return;\n    }\n\n    // Perform search and fetch all books in parallel\n    Promise.all([\n      BooksApi.search(keyWord, limit),\n      BooksApi.getAll()\n    ])\n    .then(([listSearch, listAll]) => {\n      if (listSearch && listSearch.length > 0) {\n        const arrTemp = new Map(listAll.map((book) => [book.id, book.shelf]));\n        listSearch.forEach((book) => {\n          book.shelf = arrTemp.get(book.id) ?? \"none\";\n        });\n        setBookResultList(listSearch);\n      } else {\n        setBookResultList([]);\n      }\n    })\n    .catch((error) => {\n      console.error(\"Error fetching books:\", error);\n      setBookResultList([]);\n    });\n  }, [keyWord, limit]);\n\n  // Debounced search execution\n  useEffect(() => {\n    const delayDebounceFn = setTimeout(() => {\n      search();\n    }, 1000);\n\n    return () => clearTimeout(delayDebounceFn);\n  }, [search]);\n\n  return (\n    <div className=\"app\">\n      <div className=\"search-books\">\n        <div className=\"search-books-bar\">\n          <Link to=\"/\" className=\"close-search\">\n            Close\n          </Link>\n          <div className=\"search-books-input-wrapper\">\n            <input\n              type=\"text\"\n              placeholder=\"Search by title, author, or ISBN\"\n              onChange={handleChangeKeyWord}\n            />\n          </div>\n        </div>\n        <div className=\"search-books-results\">\n          <ol className=\"books-grid\">\n            {bookResultList.map((book) => (\n              <BookItem book={book} key={book.id} updateList={search} />\n            ))}\n          </ol>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SearchBook;"],"mappings":"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"},"metadata":{},"sourceType":"module"}